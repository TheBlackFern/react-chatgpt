import{H as he,k as Se,r,d as M,s as ge,_ as D,f as C,$ as A,Y as be,S as ve,j as d,c as we,u as ye,m as N}from"./index-113990be.js";import{F as G,a as W,b as q,c as J,d as Q,e as Z}from"./gpt-form-9b7de952.js";import{T as Ee}from"./textarea-b3eac810.js";import{$ as De,a as ne}from"./index-5729b9a2.js";import{A as H}from"./index-6006a462.js";const oe=["PageUp","PageDown"],ae=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],re={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},I="Slider",[z,Pe,Re]=he(I),[ie,et]=Se(I,[Re]),[_e,k]=ie(I),Ce=r.forwardRef((e,t)=>{const{name:o,min:a=0,max:c=100,step:n=1,orientation:f="horizontal",disabled:s=!1,minStepsBetweenThumbs:l=0,defaultValue:p=[a],value:h,onValueChange:i=()=>{},onValueCommit:u=()=>{},inverted:w=!1,...g}=e,[x,S]=r.useState(null),y=M(t,$=>S($)),R=r.useRef(new Set),m=r.useRef(0),E=f==="horizontal",j=x?!!x.closest("form"):!0,L=E?Me:je,[b=[],me]=ge({prop:h,defaultProp:p,onChange:$=>{var v;(v=[...R.current][m.current])===null||v===void 0||v.focus(),i($)}}),U=r.useRef(b);function pe($){const v=Fe(b,$);K($,v)}function $e($){K($,m.current)}function xe(){const $=U.current[m.current];b[m.current]!==$&&u(b)}function K($,v,{commit:B}={commit:!1}){const Y=Le(n),F=Ue(Math.round(($-a)/n)*n+a,Y),V=ne(F,[a,c]);me((_=[])=>{const P=Ae(_,V,v);if(Oe(P,l*n)){m.current=P.indexOf(V);const X=String(P)!==String(_);return X&&B&&u(P),X?P:_}else return _})}return r.createElement(_e,{scope:e.__scopeSlider,disabled:s,min:a,max:c,valueIndexToChangeRef:m,thumbs:R.current,values:b,orientation:f},r.createElement(z.Provider,{scope:e.__scopeSlider},r.createElement(z.Slot,{scope:e.__scopeSlider},r.createElement(L,D({"aria-disabled":s,"data-disabled":s?"":void 0},g,{ref:y,onPointerDown:C(g.onPointerDown,()=>{s||(U.current=b)}),min:a,max:c,inverted:w,onSlideStart:s?void 0:pe,onSlideMove:s?void 0:$e,onSlideEnd:s?void 0:xe,onHomeKeyDown:()=>!s&&K(a,0,{commit:!0}),onEndKeyDown:()=>!s&&K(c,b.length-1,{commit:!0}),onStepKeyDown:({event:$,direction:v})=>{if(!s){const F=oe.includes($.key)||$.shiftKey&&ae.includes($.key)?10:1,V=m.current,_=b[V],P=n*F*v;K(_+P,V,{commit:!0})}}})))),j&&b.map(($,v)=>r.createElement(Te,{key:v,name:o?o+(b.length>1?"[]":""):void 0,value:$})))}),[se,ce]=ie(I,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Me=r.forwardRef((e,t)=>{const{min:o,max:a,dir:c,inverted:n,onSlideStart:f,onSlideMove:s,onSlideEnd:l,onStepKeyDown:p,...h}=e,[i,u]=r.useState(null),w=M(t,m=>u(m)),g=r.useRef(),x=ve(c),S=x==="ltr",y=S&&!n||!S&&n;function R(m){const E=g.current||i.getBoundingClientRect(),j=[0,E.width],b=O(j,y?[o,a]:[a,o]);return g.current=E,b(m-E.left)}return r.createElement(se,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width"},r.createElement(le,D({dir:x,"data-orientation":"horizontal"},h,{ref:w,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:m=>{const E=R(m.clientX);f==null||f(E)},onSlideMove:m=>{const E=R(m.clientX);s==null||s(E)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:m=>{const j=re[y?"from-left":"from-right"].includes(m.key);p==null||p({event:m,direction:j?-1:1})}})))}),je=r.forwardRef((e,t)=>{const{min:o,max:a,inverted:c,onSlideStart:n,onSlideMove:f,onSlideEnd:s,onStepKeyDown:l,...p}=e,h=r.useRef(null),i=M(t,h),u=r.useRef(),w=!c;function g(x){const S=u.current||h.current.getBoundingClientRect(),y=[0,S.height],m=O(y,w?[a,o]:[o,a]);return u.current=S,m(x-S.top)}return r.createElement(se,{scope:e.__scopeSlider,startEdge:w?"bottom":"top",endEdge:w?"top":"bottom",size:"height",direction:w?1:-1},r.createElement(le,D({"data-orientation":"vertical"},p,{ref:i,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const S=g(x.clientY);n==null||n(S)},onSlideMove:x=>{const S=g(x.clientY);f==null||f(S)},onSlideEnd:()=>{u.current=void 0,s==null||s()},onStepKeyDown:x=>{const y=re[w?"from-bottom":"from-top"].includes(x.key);l==null||l({event:x,direction:y?-1:1})}})))}),le=r.forwardRef((e,t)=>{const{__scopeSlider:o,onSlideStart:a,onSlideMove:c,onSlideEnd:n,onHomeKeyDown:f,onEndKeyDown:s,onStepKeyDown:l,...p}=e,h=k(I,o);return r.createElement(A.span,D({},p,{ref:t,onKeyDown:C(e.onKeyDown,i=>{i.key==="Home"?(f(i),i.preventDefault()):i.key==="End"?(s(i),i.preventDefault()):oe.concat(ae).includes(i.key)&&(l(i),i.preventDefault())}),onPointerDown:C(e.onPointerDown,i=>{const u=i.target;u.setPointerCapture(i.pointerId),i.preventDefault(),h.thumbs.has(u)?u.focus():a(i)}),onPointerMove:C(e.onPointerMove,i=>{i.target.hasPointerCapture(i.pointerId)&&c(i)}),onPointerUp:C(e.onPointerUp,i=>{const u=i.target;u.hasPointerCapture(i.pointerId)&&(u.releasePointerCapture(i.pointerId),n(i))})}))}),Ke="SliderTrack",Ve=r.forwardRef((e,t)=>{const{__scopeSlider:o,...a}=e,c=k(Ke,o);return r.createElement(A.span,D({"data-disabled":c.disabled?"":void 0,"data-orientation":c.orientation},a,{ref:t}))}),ee="SliderRange",Ie=r.forwardRef((e,t)=>{const{__scopeSlider:o,...a}=e,c=k(ee,o),n=ce(ee,o),f=r.useRef(null),s=M(t,f),l=c.values.length,p=c.values.map(u=>de(u,c.min,c.max)),h=l>1?Math.min(...p):0,i=100-Math.max(...p);return r.createElement(A.span,D({"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0},a,{ref:s,style:{...e.style,[n.startEdge]:h+"%",[n.endEdge]:i+"%"}}))}),te="SliderThumb",Be=r.forwardRef((e,t)=>{const o=Pe(e.__scopeSlider),[a,c]=r.useState(null),n=M(t,s=>c(s)),f=r.useMemo(()=>a?o().findIndex(s=>s.ref.current===a):-1,[o,a]);return r.createElement(Ne,D({},e,{ref:n,index:f}))}),Ne=r.forwardRef((e,t)=>{const{__scopeSlider:o,index:a,...c}=e,n=k(te,o),f=ce(te,o),[s,l]=r.useState(null),p=M(t,S=>l(S)),h=be(s),i=n.values[a],u=i===void 0?0:de(i,n.min,n.max),w=ke(a,n.values.length),g=h==null?void 0:h[f.size],x=g?He(g,u,f.direction):0;return r.useEffect(()=>{if(s)return n.thumbs.add(s),()=>{n.thumbs.delete(s)}},[s,n.thumbs]),r.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[f.startEdge]:`calc(${u}% + ${x}px)`}},r.createElement(z.ItemSlot,{scope:e.__scopeSlider},r.createElement(A.span,D({role:"slider","aria-label":e["aria-label"]||w,"aria-valuemin":n.min,"aria-valuenow":i,"aria-valuemax":n.max,"aria-orientation":n.orientation,"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,tabIndex:n.disabled?void 0:0},c,{ref:p,style:i===void 0?{display:"none"}:e.style,onFocus:C(e.onFocus,()=>{n.valueIndexToChangeRef.current=a})}))))}),Te=e=>{const{value:t,...o}=e,a=r.useRef(null),c=De(t);return r.useEffect(()=>{const n=a.current,f=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==t&&l){const p=new Event("input",{bubbles:!0});l.call(n,t),n.dispatchEvent(p)}},[c,t]),r.createElement("input",D({style:{display:"none"}},o,{ref:a,defaultValue:t}))};function Ae(e=[],t,o){const a=[...e];return a[o]=t,a.sort((c,n)=>c-n)}function de(e,t,o){const n=100/(o-t)*(e-t);return ne(n,[0,100])}function ke(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Fe(e,t){if(e.length===1)return 0;const o=e.map(c=>Math.abs(c-t)),a=Math.min(...o);return o.indexOf(a)}function He(e,t,o){const a=e/2,n=O([0,50],[0,a]);return(a-n(t)*o)*o}function ze(e){return e.slice(0,-1).map((t,o)=>e[o+1]-t)}function Oe(e,t){if(t>0){const o=ze(e);return Math.min(...o)>=t}return!0}function O(e,t){return o=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(o-e[0])}}function Le(e){return(String(e).split(".")[1]||"").length}function Ue(e,t){const o=Math.pow(10,t);return Math.round(e*o)/o}const fe=Ce,Ye=Ve,Xe=Ie,Ge=Be,ue=r.forwardRef(({className:e,...t},o)=>d.jsxs(fe,{ref:o,className:we("relative flex w-full touch-none select-none items-center",e),...t,children:[d.jsx(Ye,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:d.jsx(Xe,{className:"absolute h-full bg-primary"})}),d.jsx(Ge,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ue.displayName=fe.displayName;const T=4,tt=({step:e,form:t,submitted:o,renderButtons:a,incrementStep:c})=>{const{t:n}=ye(["form"]),f=l=>{if(l<.4)return n("degree.bland");if(l<.6)return n("degree.certain");if(l<.8)return n("degree.creative");if(l<=1)return n("degree.random")};async function s(){await t.trigger("prompt"),t.getFieldState("prompt").invalid}return d.jsxs(N.div,{className:"flex absolute p-1 left-0 right-0 top-0 flex-col",animate:{translateX:`${-(e-T)*400}px`},style:{translateX:`${-(e-T)*400}px`},transition:{ease:"easeInOut"},children:[d.jsx(H,{children:!o&&d.jsx(N.div,{initial:{opacity:1,height:"auto",marginBottom:"12px"},exit:{opacity:0,height:0,marginBottom:"0px"},transition:{duration:1,delay:1},children:d.jsx("h1",{className:"font-medium text-xl",children:n("step4.heading")})})}),d.jsx(G,{control:t.control,name:"prompt",render:({field:l})=>d.jsxs(W,{className:"space-y-0",children:[d.jsx(q,{className:"text-md block mb-1.5",children:n("step4.title1")}),d.jsx(H,{children:!o&&d.jsx(N.div,{initial:{opacity:1,height:"auto",marginBottom:"6px"},exit:{opacity:0,height:0,marginBottom:"0px"},transition:{duration:1,delay:1},children:d.jsx(J,{children:n("step4.description1")})})}),d.jsx(Q,{children:d.jsx(Ee,{"data-testid":"form-prompt-textarea",rows:2,placeholder:n("step4.placeholder"),...l,disabled:e!==T})}),d.jsx(Z,{})]})}),d.jsx(G,{control:t.control,name:"temperature",render:({field:l})=>d.jsxs(W,{className:"mt-3 space-y-0",children:[d.jsx(q,{className:"text-md block mb-1.5",children:n("step4.title2")}),d.jsx(H,{children:!o&&d.jsx(N.div,{initial:{opacity:1,height:"auto",marginBottom:"12px"},exit:{opacity:0,height:0,marginBottom:"0px"},transition:{duration:1,delay:1},children:d.jsx(J,{children:n("step4.description2")})})}),d.jsxs("div",{className:"flex flex-row gap-3 w-auto",children:[d.jsx(Q,{className:"w-48",children:d.jsx(ue,{"data-testid":"form-temperature-slider",disabled:e!==T,min:.2,max:1,step:.05,defaultValue:[l.value],onValueChange:p=>{l.onChange(p[0])}})}),d.jsx("span",{"data-testid":"form-temperature-value",className:"font-medium w-8",children:l.value.toFixed(2)}),d.jsx("span",{"data-testid":"form-temperature-text",className:"font-thin",children:f(l.value)})]}),d.jsx(Z,{})]})}),a(s)]})};export{tt as default};
