import{F as g,r as d,G as m,j as e,B as y,c as u,m as w,u as b}from"./index-113990be.js";import{C as j}from"./chevron-down-985f9921.js";import{A as v}from"./index-6006a462.js";function C(t,n,r){var i;if(typeof t=="string"){let o=document;n&&(g(!!n.current),o=n.current),r?((i=r[t])!==null&&i!==void 0||(r[t]=o.querySelectorAll(t)),t=r[t]):t=o.querySelectorAll(t)}else t instanceof Element&&(t=[t]);return Array.from(t||[])}const k={some:0,all:1};function I(t,n,{root:r,margin:i,amount:o="some"}={}){const a=C(t),s=new WeakMap,f=p=>{p.forEach(c=>{const x=s.get(c.target);if(c.isIntersecting!==!!x)if(c.isIntersecting){const h=n(c);typeof h=="function"?s.set(c.target,h):l.unobserve(c.target)}else x&&(x(c),s.delete(c.target))})},l=new IntersectionObserver(f,{root:r,rootMargin:i,threshold:typeof o=="number"?o:k[o]});return a.forEach(p=>l.observe(p)),()=>l.disconnect()}function E(t,{root:n,margin:r,amount:i,once:o=!1}={}){const[a,s]=d.useState(!1);return d.useEffect(()=>{if(!t.current||o&&a)return;const f=()=>(s(!0),o?void 0:()=>s(!1)),l={root:n&&n.current||void 0,margin:r,amount:i};return I(t.current,f,l)},[n,t,r,o]),a}const N=m("CopyCheck",[["path",{d:"m12 15 2 2 4-4",key:"2c609p"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),T=m("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),V=({textToCopy:t,className:n})=>{const[r,i]=d.useState(!1);async function o(s){return"clipboard"in navigator?await navigator.clipboard.writeText(s):document.execCommand("copy",!0,s)}function a(){o(t).then(()=>{i(!0),setTimeout(()=>{i(!1)},1500)}).catch(s=>{console.log(s)})}return e.jsx(y,{variant:"outline",onClick:a,className:u("px-1 py-1 h-fit w-fit",n),children:r?e.jsx(N,{size:18}):e.jsx(T,{size:18})})},z=({message:t})=>e.jsxs(w.div,{initial:{opacity:0,x:(t.role==="assistant"?1:-1)*100},animate:{opacity:1,x:0},exit:{opacity:0,x:(t.role==="assistant"?1:-1)*100},className:u("flex flex-row gap-1.5 w-auto h-auto max-w-[66vw] px-3 py-1.5 rounded-xl shadow-md",t.role==="user"?"bg-primary text-primary-foreground self-start":"border-2 bg-background self-end"),children:[e.jsx("pre",{className:u("whitespace-pre-line break-words",t.role==="assistant"&&"after:h-[1em] after:tracking-[1rem] after:content-['\x000a0']"),children:t.content}),e.jsx(V,{textToCopy:t.content,className:u({hidden:t.role==="user"})})]}),B=({targetRef:t,className:n})=>{const r=E(t,{amount:.5});function i(){t.current&&t.current.scrollIntoView({behavior:"smooth"})}return e.jsx(y,{"data-testid":"scroll-button",variant:"outline",onClick:i,className:u("px-1 py-1 h-fit w-fit rounded-full",{hidden:r},n),children:e.jsx(j,{size:32})})},G=d.forwardRef(({messages:t,isFetching:n,targetRef:r},i)=>{const{t:o}=b(["messages"]);return t.length>0?e.jsxs(e.Fragment,{children:[e.jsx(B,{targetRef:r,className:"fixed bottom-3 right-3 md:bottom-8 md:right-8"}),e.jsx("div",{ref:i,className:"absolute flex flex-col gap-4 w-full max-w-[1000px] px-3 md:px-20 pb-10 pt-7 z-10",children:e.jsxs(v,{initial:!1,children:[t.map((a,s)=>e.jsx(z,{message:a},s)),n&&e.jsx(w.div,{className:"self-end",initial:{opacity:0,x:100},animate:{opacity:1,x:0},children:e.jsx("p",{className:"font-sans px-3 py-1.5 rounded-xl w-fit shadow-md bg-background border-2 ml-5",children:o("typing")})})]})})]}):null});export{G as default};
