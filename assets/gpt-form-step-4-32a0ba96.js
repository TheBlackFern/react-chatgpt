import{h as xe,i as Se,r as i,p as M,I as ge,_ as D,t as C,$ as A,N as be,H as ve,j as d,c as we,d as ye,m as N}from"./index-07dc5b8b.js";import{F as G,a as W,b as q,c as J,d as Q,e as Z}from"./gpt-form-ae395a9b.js";import{T as Ee}from"./textarea-77ff4d5f.js";import{$ as De,a as ne}from"./index-4a98382f.js";import{A as H}from"./index-57af7b14.js";const oe=["PageUp","PageDown"],ae=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],re={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},V="Slider",[z,Pe,Re]=xe(V),[ie,et]=Se(V,[Re]),[_e,k]=ie(V),Ce=i.forwardRef((e,t)=>{const{name:n,min:a=0,max:r=100,step:o=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:m=0,defaultValue:$=[a],value:x,onValueChange:s=()=>{},onValueCommit:f=()=>{},inverted:w=!1,...g}=e,[h,S]=i.useState(null),y=M(t,p=>S(p)),R=i.useRef(new Set),u=i.useRef(0),E=l==="horizontal",j=h?!!h.closest("form"):!0,L=E?Me:je,[b=[],me]=ge({prop:x,defaultProp:$,onChange:p=>{var v;(v=[...R.current][u.current])===null||v===void 0||v.focus(),s(p)}}),U=i.useRef(b);function pe(p){const v=Fe(b,p);K(p,v)}function $e(p){K(p,u.current)}function he(){const p=U.current[u.current];b[u.current]!==p&&f(b)}function K(p,v,{commit:B}={commit:!1}){const Y=Le(o),F=Ue(Math.round((p-a)/o)*o+a,Y),I=ne(F,[a,r]);me((_=[])=>{const P=Ae(_,I,v);if(Oe(P,m*o)){u.current=P.indexOf(I);const X=String(P)!==String(_);return X&&B&&f(P),X?P:_}else return _})}return i.createElement(_e,{scope:e.__scopeSlider,disabled:c,min:a,max:r,valueIndexToChangeRef:u,thumbs:R.current,values:b,orientation:l},i.createElement(z.Provider,{scope:e.__scopeSlider},i.createElement(z.Slot,{scope:e.__scopeSlider},i.createElement(L,D({"aria-disabled":c,"data-disabled":c?"":void 0},g,{ref:y,onPointerDown:C(g.onPointerDown,()=>{c||(U.current=b)}),min:a,max:r,inverted:w,onSlideStart:c?void 0:pe,onSlideMove:c?void 0:$e,onSlideEnd:c?void 0:he,onHomeKeyDown:()=>!c&&K(a,0,{commit:!0}),onEndKeyDown:()=>!c&&K(r,b.length-1,{commit:!0}),onStepKeyDown:({event:p,direction:v})=>{if(!c){const F=oe.includes(p.key)||p.shiftKey&&ae.includes(p.key)?10:1,I=u.current,_=b[I],P=o*F*v;K(_+P,I,{commit:!0})}}})))),j&&b.map((p,v)=>i.createElement(Te,{key:v,name:n?n+(b.length>1?"[]":""):void 0,value:p})))}),[se,ce]=ie(V,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Me=i.forwardRef((e,t)=>{const{min:n,max:a,dir:r,inverted:o,onSlideStart:l,onSlideMove:c,onSlideEnd:m,onStepKeyDown:$,...x}=e,[s,f]=i.useState(null),w=M(t,u=>f(u)),g=i.useRef(),h=ve(r),S=h==="ltr",y=S&&!o||!S&&o;function R(u){const E=g.current||s.getBoundingClientRect(),j=[0,E.width],b=O(j,y?[n,a]:[a,n]);return g.current=E,b(u-E.left)}return i.createElement(se,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width"},i.createElement(le,D({dir:h,"data-orientation":"horizontal"},x,{ref:w,style:{...x.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:u=>{const E=R(u.clientX);l==null||l(E)},onSlideMove:u=>{const E=R(u.clientX);c==null||c(E)},onSlideEnd:()=>{g.current=void 0,m==null||m()},onStepKeyDown:u=>{const j=re[y?"from-left":"from-right"].includes(u.key);$==null||$({event:u,direction:j?-1:1})}})))}),je=i.forwardRef((e,t)=>{const{min:n,max:a,inverted:r,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:m,...$}=e,x=i.useRef(null),s=M(t,x),f=i.useRef(),w=!r;function g(h){const S=f.current||x.current.getBoundingClientRect(),y=[0,S.height],u=O(y,w?[a,n]:[n,a]);return f.current=S,u(h-S.top)}return i.createElement(se,{scope:e.__scopeSlider,startEdge:w?"bottom":"top",endEdge:w?"top":"bottom",size:"height",direction:w?1:-1},i.createElement(le,D({"data-orientation":"vertical"},$,{ref:s,style:{...$.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:h=>{const S=g(h.clientY);o==null||o(S)},onSlideMove:h=>{const S=g(h.clientY);l==null||l(S)},onSlideEnd:()=>{f.current=void 0,c==null||c()},onStepKeyDown:h=>{const y=re[w?"from-bottom":"from-top"].includes(h.key);m==null||m({event:h,direction:y?-1:1})}})))}),le=i.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:a,onSlideMove:r,onSlideEnd:o,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:m,...$}=e,x=k(V,n);return i.createElement(A.span,D({},$,{ref:t,onKeyDown:C(e.onKeyDown,s=>{s.key==="Home"?(l(s),s.preventDefault()):s.key==="End"?(c(s),s.preventDefault()):oe.concat(ae).includes(s.key)&&(m(s),s.preventDefault())}),onPointerDown:C(e.onPointerDown,s=>{const f=s.target;f.setPointerCapture(s.pointerId),s.preventDefault(),x.thumbs.has(f)?f.focus():a(s)}),onPointerMove:C(e.onPointerMove,s=>{s.target.hasPointerCapture(s.pointerId)&&r(s)}),onPointerUp:C(e.onPointerUp,s=>{const f=s.target;f.hasPointerCapture(s.pointerId)&&(f.releasePointerCapture(s.pointerId),o(s))})}))}),Ke="SliderTrack",Ie=i.forwardRef((e,t)=>{const{__scopeSlider:n,...a}=e,r=k(Ke,n);return i.createElement(A.span,D({"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation},a,{ref:t}))}),ee="SliderRange",Ve=i.forwardRef((e,t)=>{const{__scopeSlider:n,...a}=e,r=k(ee,n),o=ce(ee,n),l=i.useRef(null),c=M(t,l),m=r.values.length,$=r.values.map(f=>de(f,r.min,r.max)),x=m>1?Math.min(...$):0,s=100-Math.max(...$);return i.createElement(A.span,D({"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0},a,{ref:c,style:{...e.style,[o.startEdge]:x+"%",[o.endEdge]:s+"%"}}))}),te="SliderThumb",Be=i.forwardRef((e,t)=>{const n=Pe(e.__scopeSlider),[a,r]=i.useState(null),o=M(t,c=>r(c)),l=i.useMemo(()=>a?n().findIndex(c=>c.ref.current===a):-1,[n,a]);return i.createElement(Ne,D({},e,{ref:o,index:l}))}),Ne=i.forwardRef((e,t)=>{const{__scopeSlider:n,index:a,...r}=e,o=k(te,n),l=ce(te,n),[c,m]=i.useState(null),$=M(t,S=>m(S)),x=be(c),s=o.values[a],f=s===void 0?0:de(s,o.min,o.max),w=ke(a,o.values.length),g=x==null?void 0:x[l.size],h=g?He(g,f,l.direction):0;return i.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),i.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${f}% + ${h}px)`}},i.createElement(z.ItemSlot,{scope:e.__scopeSlider},i.createElement(A.span,D({role:"slider","aria-label":e["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":s,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0},r,{ref:$,style:s===void 0?{display:"none"}:e.style,onFocus:C(e.onFocus,()=>{o.valueIndexToChangeRef.current=a})}))))}),Te=e=>{const{value:t,...n}=e,a=i.useRef(null),r=De(t);return i.useEffect(()=>{const o=a.current,l=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(l,"value").set;if(r!==t&&m){const $=new Event("input",{bubbles:!0});m.call(o,t),o.dispatchEvent($)}},[r,t]),i.createElement("input",D({style:{display:"none"}},n,{ref:a,defaultValue:t}))};function Ae(e=[],t,n){const a=[...e];return a[n]=t,a.sort((r,o)=>r-o)}function de(e,t,n){const o=100/(n-t)*(e-t);return ne(o,[0,100])}function ke(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Fe(e,t){if(e.length===1)return 0;const n=e.map(r=>Math.abs(r-t)),a=Math.min(...n);return n.indexOf(a)}function He(e,t,n){const a=e/2,o=O([0,50],[0,a]);return(a-o(t)*n)*n}function ze(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Oe(e,t){if(t>0){const n=ze(e);return Math.min(...n)>=t}return!0}function O(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(n-e[0])}}function Le(e){return(String(e).split(".")[1]||"").length}function Ue(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}const fe=Ce,Ye=Ie,Xe=Ve,Ge=Be,ue=i.forwardRef(({className:e,...t},n)=>d.jsxs(fe,{ref:n,className:we("relative flex w-full touch-none select-none items-center",e),...t,children:[d.jsx(Ye,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:d.jsx(Xe,{className:"absolute h-full bg-primary"})}),d.jsx(Ge,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ue.displayName=fe.displayName;const T=4,tt=({step:e,form:t,submitted:n,children:a})=>{const{t:r}=ye(["form"]),o=l=>{if(l<.4)return r("degree.bland");if(l<.6)return r("degree.certain");if(l<.8)return r("degree.creative");if(l<=1)return r("degree.random")};return d.jsxs(N.div,{className:"flex absolute p-1 left-0 right-0 top-0 flex-col",animate:{translateX:`${-(e-T)*400}px`},style:{translateX:`${-(e-T)*400}px`},transition:{ease:"easeInOut"},children:[d.jsx(H,{children:!n&&d.jsx(N.div,{initial:{opacity:1,height:"auto",marginBottom:"12px"},exit:{opacity:0,height:0,marginBottom:"0px"},transition:{duration:1,delay:1},children:d.jsx("h1",{className:"font-medium text-xl",children:r("step4.heading")})})}),d.jsx(G,{control:t.control,name:"prompt",render:({field:l})=>d.jsxs(W,{className:"space-y-0",children:[d.jsx(q,{className:"text-md block mb-1.5",children:r("step4.title1")}),d.jsx(H,{children:!n&&d.jsx(N.div,{initial:{opacity:1,height:"auto",marginBottom:"6px"},exit:{opacity:0,height:0,marginBottom:"0px"},transition:{duration:1,delay:1},children:d.jsx(J,{children:r("step4.description1")})})}),d.jsx(Q,{children:d.jsx(Ee,{"data-testid":"form-textarea",rows:2,placeholder:r("step4.placeholder"),...l,disabled:e!==T})}),d.jsx(Z,{})]})}),d.jsx(G,{control:t.control,name:"temperature",render:({field:l})=>d.jsxs(W,{className:"mt-3 space-y-0",children:[d.jsx(q,{className:"text-md block mb-1.5",children:r("step4.title2")}),d.jsx(H,{children:!n&&d.jsx(N.div,{initial:{opacity:1,height:"auto",marginBottom:"12px"},exit:{opacity:0,height:0,marginBottom:"0px"},transition:{duration:1,delay:1},children:d.jsx(J,{children:r("step4.description2")})})}),d.jsxs("div",{className:"flex flex-row gap-3 w-auto",children:[d.jsx(Q,{className:"w-48",children:d.jsx(ue,{"data-testid":"form-slider",disabled:e!==T,min:.2,max:1,step:.05,defaultValue:[l.value],onValueChange:c=>{l.onChange(c[0])}})}),d.jsx("span",{className:"font-medium w-8",children:l.value.toFixed(2)}),d.jsx("span",{className:"font-thin",children:o(l.value)})]}),d.jsx(Z,{})]})}),a]})};export{tt as default};
